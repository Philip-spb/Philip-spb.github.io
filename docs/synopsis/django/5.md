---
layout: default
title: "Работа с БД"
grand_parent: "Конспекты"
parent: "Конспекты по Django"
nav_order: 5
---

# Работа с БД

## Чтение данных из БД

Для удобства добавим магисческий метод классу `__str__` в файл `models.py`:

```python
def __str__(self):
    return self.title
```

| Команда                                  | Описание                                 |
| ---------------------------------------- | ---------------------------------------- |
| `News.objects.all()`                     | Вывод всех объектов                      |
| `News.objects.filter(title='Новость 5')` | Вывод записей в соотвтетствии с фильтром |

## Обновление данных в БД

Для обновления записи сначала нужно её получить

| Команда                            | Описание                                                 |
| ---------------------------------- | -------------------------------------------------------- |
| `news4 = News.objects.get(pk='4')` | Получение конкретной записи и присваевание ей переменной |
| `news4.title = 'Новая ность 4'`    | Вносим изменения в запись                                |
| `news4.save()`                     | Сохраняем изменения                                      |

## Удаление записи из БД

Для удаления записи её надо сначала получить

| Команда                            | Описание                             |
| ---------------------------------- | ------------------------------------ |
| `news6 = News.objects.get(pk='6')` | Получение записи с идентификатором 6 |
| `news6.delete()`                   | Удаление записи                      |

## Дополнительные комнады для работы с БД:

| Команда                                    | Описание                                                 |
| ------------------------------------------ | -------------------------------------------------------- |
| `News.objects.order_by('title')`           | Сортировка по полую `title`                              |
| `News.objects.order_by('-title')`          | Сортировка в обратном порядке                            |
| ` News.objects.exclude(title='Новость 5')` | Вывод записей за исключением записей указанных в условии |