---
layout: default
title: "Библиотека NumPy"
grand_parent: "Конспекты"
parent: "Python"
nav_order: 4
---

# Библиотека NumPy

## Основные методы

*Основной объект numpy – однородный многомерный массив*

```py
x = np.array(range(5), dtype=str)  # array(['0', '1', '2', '3', '4'], dtype='<U1')
x.shape  # (5,)  – размерность массива
```

```py
x = np.array([[1,2,3], [4,5,6]])
# array([[1, 2, 3],
#        [4, 5, 6]])
```

```py
zeroes_array = np.zeros(shape=(3,4))
# array([[0., 0., 0., 0.],
#        [0., 0., 0., 0.],
#        [0., 0., 0., 0.]])
```

```py
zeroes_array = np.ones(shape=(3,3))
# array([[1., 1., 1.],
#        [1., 1., 1.],
#        [1., 1., 1.]])
```

**Создание массива произвольного размера и заполнение её константами**
```py
array1 = np.full(shape=(2,3), fill_value=7)
# array([[7, 7, 7],
#        [7, 7, 7]])
```

**Единичная матрица**
```py
Emat = np.eye(N=3)
# array([[1., 0., 0.],
#        [0., 1., 0.],
#        [0., 0., 1.]])
```

**Создание матрицы указанной размерности из случайных значений**
```py
Rmat = np.random.random(size=(2,3))
# array([[0.30673558, 0.02313395, 0.98715127],
#        [0.18445517, 0.53445597, 0.28846672]])
```

### Работа с измерениями матрицы

```py
Rmat = np.random.random(size=(3000,100))
print('Число измерений = ', Rmat.ndim)
print('Число измерений = ', Rmat[:,:].ndim)
print('Число измерений = ', Rmat[:,:,np.newaxis].ndim)
# Число измерений =  2
# Число измерений =  2
# Число измерений =  3
```
`ndarray.shape` – размеры массива (кортеж)
`ndarray.ndim` – длина кортежа ndarray.shape

```py
Rmat = np.random.random(size=(3000,100))
print('Число измерений = ', Rmat.shape)
print('Число измерений = ', Rmat[:,:,np.newaxis].shape)
print('Число измерений = ', Rmat[np.newaxis,:,:].shape)
# Число измерений =  (3000, 100)
# Число измерений =  (3000, 100, 1)
# Число измерений =  (1, 3000, 100)
```

`ndarray.size` – количество элементов массива
`ndarray.itemsize` – размер каждого элемента массива в байтах

**Срез матрицы**
```py
Rmat[1:3, 2:9:2]
# array([[0.26272992, 0.79673286, 0.81855101, 0.52193583],
#        [0.34228175, 0.54634559, 0.72438628, 0.59615539]])
```

Можно также просто перечислять необходимые столбцы/строки
```py
my_array = np.array([list(range(10)) for _ in range(10)])
my_array[0:2,[2,4,9]]
# array([[2, 4, 9],
#        [2, 4, 9]])
```

**Копирование массивов**

Копирование возможно осуществлять только таким образом

```py
Emat = np.eye(N=3)
Smat = Emat.copy()
```

 ## Математические операции с векоторами и матрицами

 * Сложение массивов (одинаковвых размеров)
 * Уможение массива на число
 * Покомпонентное умножение массивов
 * Скалярное умножение массивов
```py
array1 = np.full(shape=(2,3), fill_value=7)
ones_array = np.eye(N=3)
print(array1 @ ones_array)
# array([[7., 7., 7.],
#        [7., 7., 7.]])
```
 * Транспонирование (`ones_array.T`)

### Необычные для математики опреации

**Прибавить / вычесть число**

```py
array1 = np.eye(N=4) + 5
# array([[6., 5., 5., 5.],
#        [5., 6., 5., 5.],
#        [5., 5., 6., 5.],
#        [5., 5., 5., 6.]])
```

**Прибавление к массиву вектора - строки**

```py
Amat = np.zeros(shape=(3,4))+1
bvect = np.array(range(Amat.shape[1]))
print(Amat + bvect)
# array([[1., 2., 3., 4.],
#        [1., 2., 3., 4.],
#        [1., 2., 3., 4.]])
```

## Логические операции с массивами

```py
a = np.array([1,2,3,4])
b = np.array([4,2,2,4])
print(a == b)  # [False  True False  True]
c = a > b
print(c, type(c))  # [False False  True False] <class 'numpy.ndarray'>
```

**Фильрация**

```py
d = np.array([4,1,2,3,5])
e = d > 2
print(e, type(e))  # [ True False False  True  True] <class 'numpy.ndarray'>
d1 = d[e]
print(d1)  # [4 3 5]
```

```py
Cmat = np.array([list(range(10)) for _ in range(10)])
print(Cmat[Cmat > 6])
# [7 8 9 7 8 9 7 8 9 7 8 9 7 8 9 7 8 9 7 8 9 7 8 9 7 8 9 7 8 9]
```

**Присвоение при помощи фильтра**

```py
Dmat = Cmat - 5
Dmat[Dmat < 0] = 0
print(Dmat)
# [[0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]
#  [0 0 0 0 0 0 1 2 3 4]]
```
